<div class="container">
  <div class="row justify-content-center">
    <div class="col-sm-8">

      <%= form_tag results_path, method: :get do %>
        <%= text_field_tag :query,
          params[:query],
          class: "form-control",
          placeholder: "Search for artists and labels"
        %>
        <%= submit_tag "Search", class: "btn btn-primary" %>
      <% end %>

      <% if @artists %>
        <h2>Artists</h2>
          <% @artists.each do |artist| %>
              <h5><%= artist.name %></h5  >
              <p><%= artist.location %></p>
              <p>
                <% artist.roles.each do |role| %>
                  <span class="badge badge-pill badge-info p-2"><%= role %></span>
                <% end %>
              </p>
              <p>
                <% artist.genres.each do |genre| %>
                  <span class="badge badge-pill badge-light p-2">#<%= genre %></span>
                <% end %>
              </p>
          <% end %>
      <% end %>

      <% if @labels %>
        <h2>Labels</h2>
          <% @labels.each do |label| %>
            <h5><%= label.name %></h5>
          <% end %>
      <% end %>

    </div>
  </div>
</div>

<%= simple_form_for(:filter, method: :get, url: results_path) do |f| %>
  <%= f.input :genres, as: :check_boxes, collection: Artist::GENRES, required: false, include_hidden: false, input_html: { multiple: true } %>
  <%= f.input :roles, as: :check_boxes, collection: Artist::ROLES, required: false, include_hidden: false, input_html: { multiple: true } %>
  <%= f.input :location, required: false, placeholder: 'Type the location'%>
  <%= f.submit 'Submit' %>
<% end %>

